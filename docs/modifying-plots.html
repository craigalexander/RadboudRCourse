<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4.3 Modifying Plots | Visualising Data using R</title>
  <meta name="description" content="This short introductory module provides an introduction to using R and how to visualise data within R." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="4.3 Modifying Plots | Visualising Data using R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This short introductory module provides an introduction to using R and how to visualise data within R." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4.3 Modifying Plots | Visualising Data using R" />
  
  <meta name="twitter:description" content="This short introductory module provides an introduction to using R and how to visualise data within R." />
  

<meta name="author" content="Craig Alexander, Eilidh Jack &amp; Marnie Low" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="using-the-more-general-ggplot-interface.html"/>
<link rel="next" href="handling-date-time-data-with-lubridate.html"/>
<script src="assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li><a href="index.html#overview" id="toc-overview"><span class="toc-section-number">1</span> Overview<span></span></a>
<ul>
<li><a href="the-ggplot2-package.html#the-ggplot2-package" id="toc-the-ggplot2-package"><span class="toc-section-number">1.1</span> The <code>ggplot2</code> package<span></span></a></li>
<li><a href="data.html#data" id="toc-data"><span class="toc-section-number">1.2</span> Data<span></span></a></li>
<li><a href="libraries.html#libraries" id="toc-libraries"><span class="toc-section-number">1.3</span> Libraries<span></span></a></li>
</ul></li>
<li><a href="intro.html#intro" id="toc-intro"><span class="toc-section-number">2</span> Getting Started<span></span></a>
<ul>
<li><a href="setting-up-r.html#setting-up-r" id="toc-setting-up-r"><span class="toc-section-number">2.1</span> Setting up R<span></span></a>
<ul>
<li><a href="setting-up-r.html#downloading-and-installing-r-for-windows" id="toc-downloading-and-installing-r-for-windows"><span class="toc-section-number">2.1.1</span> Downloading and installing R for Windows<span></span></a></li>
<li><a href="setting-up-r.html#downloading-and-installing-r-for-mac" id="toc-downloading-and-installing-r-for-mac"><span class="toc-section-number">2.1.2</span> Downloading and installing R for Mac<span></span></a></li>
</ul></li>
<li><a href="rstudio.html#rstudio" id="toc-rstudio"><span class="toc-section-number">2.2</span> RStudio<span></span></a>
<ul>
<li><a href="rstudio.html#installing-rstudio-for-windowsmac" id="toc-installing-rstudio-for-windowsmac"><span class="toc-section-number">2.2.1</span> Installing RStudio for Windows/Mac<span></span></a></li>
</ul></li>
<li><a href="r-packages.html#r-packages" id="toc-r-packages"><span class="toc-section-number">2.3</span> R packages<span></span></a></li>
</ul></li>
<li><a href="efficient-data-management-in-r.html#efficient-data-management-in-r" id="toc-efficient-data-management-in-r"><span class="toc-section-number">3</span> Efficient Data Management in R<span></span></a>
<ul>
<li><a href="tidyverse.html#tidyverse" id="toc-tidyverse"><span class="toc-section-number">3.1</span> Tidyverse<span></span></a></li>
<li><a href="pipelines.html#pipelines" id="toc-pipelines"><span class="toc-section-number">3.2</span> Pipelines<span></span></a>
<ul>
<li><a href="pipelines.html#task" id="toc-task"><span class="toc-section-number">3.2.1</span> Task<span></span></a></li>
<li><a href="pipelines.html#solution" id="toc-solution"><span class="toc-section-number">3.2.2</span> Solution<span></span></a></li>
<li><a href="pipelines.html#task-1" id="toc-task-1"><span class="toc-section-number">3.2.3</span> Task<span></span></a></li>
<li><a href="pipelines.html#answer" id="toc-answer"><span class="toc-section-number">3.2.4</span> Answer<span></span></a></li>
<li><a href="pipelines.html#additional-resources" id="toc-additional-resources"><span class="toc-section-number">3.2.5</span> Additional Resources<span></span></a></li>
</ul></li>
<li><a href="tibbles.html#tibbles" id="toc-tibbles"><span class="toc-section-number">3.3</span> Tibbles<span></span></a>
<ul>
<li><a href="tibbles.html#creating-tibbles" id="toc-creating-tibbles"><span class="toc-section-number">3.3.1</span> Creating tibbles<span></span></a></li>
<li><a href="tibbles.html#working-with-tibbles" id="toc-working-with-tibbles"><span class="toc-section-number">3.3.2</span> Working with tibbles<span></span></a></li>
<li><a href="tibbles.html#subsetting-tibbles-always-results-in-a-tibble" id="toc-subsetting-tibbles-always-results-in-a-tibble"><span class="toc-section-number">3.3.3</span> Subsetting tibbles always results in a tibble<span></span></a></li>
</ul></li>
<li><a href="reading-in-data-using-readr.html#reading-in-data-using-readr" id="toc-reading-in-data-using-readr"><span class="toc-section-number">3.4</span> Reading in data using readr<span></span></a>
<ul>
<li><a href="reading-in-data-using-readr.html#task-2" id="toc-task-2"><span class="toc-section-number">3.4.1</span> Task<span></span></a></li>
<li><a href="reading-in-data-using-readr.html#answer-1" id="toc-answer-1"><span class="toc-section-number">3.4.2</span> Answer<span></span></a></li>
<li><a href="reading-in-data-using-readr.html#specifying-column-types" id="toc-specifying-column-types"><span class="toc-section-number">3.4.3</span> Specifying column types<span></span></a></li>
<li><a href="reading-in-data-using-readr.html#additional-resources-1" id="toc-additional-resources-1"><span class="toc-section-number">3.4.4</span> Additional Resources<span></span></a></li>
</ul></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#efficient-data-manipulation-using-dplyr" id="toc-efficient-data-manipulation-using-dplyr"><span class="toc-section-number">3.5</span> Efficient data manipulation using dplyr<span></span></a>
<ul>
<li><a href="efficient-data-manipulation-using-dplyr.html#overview-the-key-functions-verbs-for-dplyr" id="toc-overview-the-key-functions-verbs-for-dplyr"><span class="toc-section-number">3.5.1</span> Overview: the key functions (“verbs”) for <code>dplyr</code><span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#selecting-observations-rows-using-filter-and-slice" id="toc-selecting-observations-rows-using-filter-and-slice"><span class="toc-section-number">3.5.2</span> Selecting observations (rows) using <code>filter</code> and <code>slice</code><span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#task-3" id="toc-task-3"><span class="toc-section-number">3.5.3</span> Task<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#answer-2" id="toc-answer-2"><span class="toc-section-number">3.5.4</span> Answer<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#selecting-variables-columns-using-select" id="toc-selecting-variables-columns-using-select"><span class="toc-section-number">3.5.5</span> Selecting variables (columns) using <code>select</code><span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#adding-new-variables-using-mutate" id="toc-adding-new-variables-using-mutate"><span class="toc-section-number">3.5.6</span> Adding new variables using <code>mutate</code><span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#task-4" id="toc-task-4"><span class="toc-section-number">3.5.7</span> Task<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#answer-3" id="toc-answer-3"><span class="toc-section-number">3.5.8</span> Answer<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#sorting-data-sets-using-arrange" id="toc-sorting-data-sets-using-arrange"><span class="toc-section-number">3.5.9</span> Sorting data sets using <code>arrange</code><span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#task-5" id="toc-task-5"><span class="toc-section-number">3.5.10</span> Task<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#answer-4" id="toc-answer-4"><span class="toc-section-number">3.5.11</span> Answer<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#grouping-data-and-calculating-group-wise-summary-statistics-group_by-and-summarise" id="toc-grouping-data-and-calculating-group-wise-summary-statistics-group_by-and-summarise"><span class="toc-section-number">3.5.12</span> Grouping data and calculating group-wise summary statistics: <code>group_by</code> and <code>summarise</code><span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#task-6" id="toc-task-6"><span class="toc-section-number">3.5.13</span> Task<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#answer-5" id="toc-answer-5"><span class="toc-section-number">3.5.14</span> Answer<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#merging-joining-data-sets-using-the-join-type-functions" id="toc-merging-joining-data-sets-using-the-join-type-functions"><span class="toc-section-number">3.5.15</span> Merging (joining) data sets using the <code>join</code>-type functions<span></span></a></li>
<li><a href="efficient-data-manipulation-using-dplyr.html#additional-resources-2" id="toc-additional-resources-2"><span class="toc-section-number">3.5.16</span> Additional Resources<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="creating-graphics-with-ggplot2.html#creating-graphics-with-ggplot2" id="toc-creating-graphics-with-ggplot2"><span class="toc-section-number">4</span> Creating Graphics with <code>ggplot2</code><span></span></a>
<ul>
<li><a href="ggplot-terms.html#ggplot-terms" id="toc-ggplot-terms"><span class="toc-section-number">4.1</span> ggplot terms<span></span></a>
<ul>
<li><a href="ggplot-terms.html#geometric-objects" id="toc-geometric-objects"><span class="toc-section-number">4.1.1</span> Geometric objects<span></span></a></li>
<li><a href="ggplot-terms.html#aesthetics" id="toc-aesthetics"><span class="toc-section-number">4.1.2</span> Aesthetics<span></span></a></li>
</ul></li>
<li><a href="using-the-more-general-ggplot-interface.html#using-the-more-general-ggplot-interface" id="toc-using-the-more-general-ggplot-interface"><span class="toc-section-number">4.2</span> Using the more general ggplot interface<span></span></a>
<ul>
<li><a href="using-the-more-general-ggplot-interface.html#a-typical-ggplot-call" id="toc-a-typical-ggplot-call"><span class="toc-section-number">4.2.1</span> A typical ggplot call<span></span></a></li>
<li><a href="using-the-more-general-ggplot-interface.html#adding-additional-layers" id="toc-adding-additional-layers"><span class="toc-section-number">4.2.2</span> Adding additional layers<span></span></a></li>
<li><a href="using-the-more-general-ggplot-interface.html#explicit-drawing" id="toc-explicit-drawing"><span class="toc-section-number">4.2.3</span> Explicit drawing<span></span></a></li>
<li><a href="using-the-more-general-ggplot-interface.html#task-7" id="toc-task-7"><span class="toc-section-number">4.2.4</span> Task<span></span></a></li>
<li><a href="using-the-more-general-ggplot-interface.html#answer-6" id="toc-answer-6"><span class="toc-section-number">4.2.5</span> Answer<span></span></a></li>
</ul></li>
<li><a href="modifying-plots.html#modifying-plots" id="toc-modifying-plots"><span class="toc-section-number">4.3</span> Modifying Plots<span></span></a>
<ul>
<li><a href="modifying-plots.html#labels-and-titles" id="toc-labels-and-titles"><span class="toc-section-number">4.3.1</span> Labels and titles<span></span></a></li>
<li><a href="modifying-plots.html#scales" id="toc-scales"><span class="toc-section-number">4.3.2</span> Scales<span></span></a></li>
<li><a href="modifying-plots.html#statistics" id="toc-statistics"><span class="toc-section-number">4.3.3</span> Statistics<span></span></a></li>
<li><a href="modifying-plots.html#theming" id="toc-theming"><span class="toc-section-number">4.3.4</span> Theming<span></span></a></li>
<li><a href="modifying-plots.html#arranging-plots-faceting" id="toc-arranging-plots-faceting"><span class="toc-section-number">4.3.5</span> Arranging plots (faceting)<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="handling-date-time-data-with-lubridate.html#handling-date-time-data-with-lubridate" id="toc-handling-date-time-data-with-lubridate"><span class="toc-section-number">5</span> Handling date-time data with <code>lubridate</code><span></span></a>
<ul>
<li><a href="creating-datetimes.html#creating-datetimes" id="toc-creating-datetimes"><span class="toc-section-number">5.1</span> Creating date/times<span></span></a>
<ul>
<li><a href="creating-datetimes.html#from-strings" id="toc-from-strings"><span class="toc-section-number">5.1.1</span> From strings<span></span></a></li>
<li><a href="creating-datetimes.html#from-individual-components" id="toc-from-individual-components"><span class="toc-section-number">5.1.2</span> From individual components<span></span></a></li>
<li><a href="creating-datetimes.html#from-existing-types" id="toc-from-existing-types"><span class="toc-section-number">5.1.3</span> From existing types<span></span></a></li>
</ul></li>
<li><a href="date-time-components.html#date-time-components" id="toc-date-time-components"><span class="toc-section-number">5.2</span> Date-time Components<span></span></a>
<ul>
<li><a href="date-time-components.html#time-spans" id="toc-time-spans"><span class="toc-section-number">5.2.1</span> Time Spans<span></span></a></li>
<li><a href="date-time-components.html#durations" id="toc-durations"><span class="toc-section-number">5.2.2</span> Durations<span></span></a></li>
<li><a href="date-time-components.html#periods" id="toc-periods"><span class="toc-section-number">5.2.3</span> Periods<span></span></a></li>
<li><a href="date-time-components.html#intervals" id="toc-intervals"><span class="toc-section-number">5.2.4</span> Intervals<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="producing-maps-for-plotting.html#producing-maps-for-plotting" id="toc-producing-maps-for-plotting"><span class="toc-section-number">6</span> Producing maps for plotting<span></span></a>
<ul>
<li><a href="producing-maps-using-ggmap.html#producing-maps-using-ggmap" id="toc-producing-maps-using-ggmap"><span class="toc-section-number">6.1</span> Producing maps using ggmap<span></span></a>
<ul>
<li><a href="producing-maps-using-ggmap.html#task-8" id="toc-task-8"><span class="toc-section-number">6.1.1</span> Task<span></span></a></li>
<li><a href="producing-maps-using-ggmap.html#answer-7" id="toc-answer-7"><span class="toc-section-number">6.1.2</span> Answer<span></span></a></li>
<li><a href="producing-maps-using-ggmap.html#producing-maps-using-leaflet" id="toc-producing-maps-using-leaflet"><span class="toc-section-number">6.1.3</span> Producing maps using leaflet<span></span></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualising Data using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modifying-plots" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Modifying Plots<a href="modifying-plots.html#modifying-plots" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="labels-and-titles" class="section level3 hasAnchor" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Labels and titles<a href="modifying-plots.html#labels-and-titles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can set the plot title using <code>ggtitle(title)</code> and the axis labels using <code>xlab(label)</code> and <code>ylab(label)</code>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="modifying-plots.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>health) <span class="sc">+</span> </span>
<span id="cb107-2"><a href="modifying-plots.html#cb107-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>HealthExpenditure,  <span class="at">y=</span>LifeExpectancy, <span class="at">colour=</span>Region) <span class="sc">+</span></span>
<span id="cb107-3"><a href="modifying-plots.html#cb107-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size=</span>Population)) <span class="sc">+</span></span>
<span id="cb107-4"><a href="modifying-plots.html#cb107-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>)  <span class="sc">+</span></span>
<span id="cb107-5"><a href="modifying-plots.html#cb107-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb107-6"><a href="modifying-plots.html#cb107-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Relationship between Health Expenditure and Life Expectancy&quot;</span>) <span class="sc">+</span></span>
<span id="cb107-7"><a href="modifying-plots.html#cb107-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Health Expenditure&quot;</span>) <span class="sc">+</span></span>
<span id="cb107-8"><a href="modifying-plots.html#cb107-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Life Expectancy&quot;</span>)    </span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-60-1.png" width="\textwidth" /></p>
<p>Changing the text shown in legends (like in our case the names of the regions) is more complicated. It is almost always easier to simply change the levels of the categorical variable in the dataset itself before invoking <code>ggplot2</code> commands.</p>
</div>
<div id="scales" class="section level3 hasAnchor" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Scales<a href="modifying-plots.html#scales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Aesthetics control <em>which</em> variables are mapped to <em>which</em> property of the geometric object. However, aesthetics do not specify <em>how</em> this mapping is performed. This is where scales come into play. Scales control <em>how</em> any value from the variable is translated into a property of a geometric object: scales control for example how a variable is translated into coordinates (say through a log transform) or into colours (say though a discrete colour palette).</p>
<p><code>ggplot2</code> automatically chooses (what it thinks is) a suitable scale. This is usually reasonable, but on occasions it might be necessary to override this.</p>
<p>There is a family of scale functions for each aesthetic. The template for the function name for scales is <code>scale_&lt;aesthetic&gt;_&lt;type&gt;</code>.</p>
<div id="scales-for-continuous-data" class="section level4 hasAnchor" number="4.3.2.1">
<h4><span class="header-section-number">4.3.2.1</span> Scales for continuous data<a href="modifying-plots.html#scales-for-continuous-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We have already seen that we can log-transform the axes using <code>scale_x_log10</code> and <code>scale_x_log10</code>. The more general functions for coordinate transforms are <code>scale_&lt;x or y&gt;_continous(...)</code>. We can. amongst others, set the axis label (argument <code>name</code>, the ticks and tickmarks (arguments <code>breaks</code> and <code>labels</code>) the limits (argument <code>limit</code>) and the transform to be used (argument <code>trans</code>).</p>
<p>The axes might use scientific notation (e.g. “4e5”). If you want to avoid using scientific notation and use fixed notation, change the <code>scipen</code> option in R, which controls when scientific notation is used (for example run <code>options(scipen=1e3)</code>).</p>
<p>There are functions for mapping continuous data to other aesthetics, too. For example, <code>scale_colour_gradient</code> converts a continuous variable to a colour using a gradient of colours. The arguments <code>low</code> and <code>high</code> specify the colours used at the two ends. <code>scale_colour_gradient2</code> allows for also specifying a mid-point colour (argument <code>mid</code>). <code>scale_colour_gradientn</code> is the most general function it allows specifying a vector of colours and corresponding vector of colours. The function <code>scale_colour_distiller</code> uses the colour brewer available at <a href="colorbrewer.org">http://colorbrewer2.org/</a> and allows for constructing colours scales which are photocopier-safe and/or work for colour-blind readers.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="modifying-plots.html#cb109-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data=</span>health) <span class="sc">+</span></span>
<span id="cb109-2"><a href="modifying-plots.html#cb109-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">aes</span>(<span class="at">x=</span>HealthExpenditure, <span class="at">y=</span>LifeExpectancy) <span class="sc">+</span></span>
<span id="cb109-3"><a href="modifying-plots.html#cb109-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour=</span>Population)) <span class="sc">+</span></span>
<span id="cb109-4"><a href="modifying-plots.html#cb109-4" aria-hidden="true" tabindex="-1"></a>         <span class="fu">scale_colour_distiller</span>(<span class="at">palette=</span><span class="st">&quot;YlOrRd&quot;</span> , <span class="at">trans=</span><span class="st">&quot;log&quot;</span>)</span>
<span id="cb109-5"><a href="modifying-plots.html#cb109-5" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-61-1.png" width="\textwidth" /></p>
<p>We have used <code>trans="log"</code> to use the log-transformed values of the population sizes (due to its skewness). The values given in the legend seem slightly odd choices: this is due to the log-transform (they are roughly <span class="math inline">\(\exp(14)\)</span>, <span class="math inline">\(\exp(17)\)</span> and <span class="math inline">\(\exp(20)\)</span>, so “nice” numbers on the log scale).</p>
<p>We have stored the plot in a variable <code>a</code> so that we can redraw it later on with different themes.</p>
</div>
<div id="scales-for-discrete-data" class="section level4 hasAnchor" number="4.3.2.2">
<h4><span class="header-section-number">4.3.2.2</span> Scales for discrete data<a href="modifying-plots.html#scales-for-discrete-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are also various scaling functions for discrete data, such as <code>scale_colour_brewer</code>.</p>
<p>Note that there are separate scales for colour (outline colour – example: <code>scale_colour_brewer</code>) and fill (fill colour – example: <code>scale_fill_brewer</code>).</p>
</div>
</div>
<div id="statistics" class="section level3 hasAnchor" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Statistics<a href="modifying-plots.html#statistics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes data has to be aggregated before it can be used in a plot. For example, when creating a bar plot illustrating the distribution of a categorical variable we have to count how many observations there are in each category. This will then determine the height of the bars. <code>ggplot2</code> automatically chooses (what it thinks is) a suitable statistic.</p>
<p>For example, when we draw a bar plot using <code>geom_bar</code>, it uses by default the statistic <code>count</code>, which first produces a tally. We don’t need to worry about this, <code>ggplot2</code> does all the work for us.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="modifying-plots.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>health) <span class="sc">+</span></span>
<span id="cb110-2"><a href="modifying-plots.html#cb110-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>Region)) <span class="sc">+</span></span>
<span id="cb110-3"><a href="modifying-plots.html#cb110-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="co"># Rotate x axis labels</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-62-1.png" width="672" /></p>
<p>Suppose we now want to a draw bar chart visualising the mean health expenditure in each region. Now we don’t want <code>ggplot2</code> to produce a tally of how often which value occurs, we want it to simply draw the bars to the heights specified in the data. Because we now want no aggregation, we have to use the statistic <code>identity</code>.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="modifying-plots.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb111-2"><a href="modifying-plots.html#cb111-2" aria-hidden="true" tabindex="-1"></a>HESummary <span class="ot">&lt;-</span> health <span class="sc">%&gt;%</span>                                      <span class="co"># Get avg health exp</span></span>
<span id="cb111-3"><a href="modifying-plots.html#cb111-3" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span> </span>
<span id="cb111-4"><a href="modifying-plots.html#cb111-4" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">summarise</span>(<span class="at">HealthExpenditure=</span><span class="fu">mean</span>(HealthExpenditure))</span>
<span id="cb111-5"><a href="modifying-plots.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>HESummary) <span class="sc">+</span></span>
<span id="cb111-6"><a href="modifying-plots.html#cb111-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>Region, <span class="at">y=</span>HealthExpenditure), <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb111-7"><a href="modifying-plots.html#cb111-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="co"># Rotate x axis labels</span></span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-63-1.png" width="672" /></p>
</div>
<div id="theming" class="section level3 hasAnchor" number="4.3.4">
<h3><span class="header-section-number">4.3.4</span> Theming<a href="modifying-plots.html#theming" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Themes can be used to customise how <code>ggplot2</code> graphics look like. We have already used <code>theme</code> to change how the horizontal axis is typeset.</p>
<p><code>ggplot2</code> has several themes built-in. The default theme is <code>theme_gray</code>. Other themes available are <code>theme_bw</code> (monochrome), <code>theme_light</code>, <code>theme_lindedraw</code> and <code>theme_minimal</code>. Further themes are available in extension packages such <a href="https://cran.r-project.org/web/packages/ggthemes">ggthemes</a>.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="modifying-plots.html#cb112-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-64-1.png" width="\textwidth" /></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="modifying-plots.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb113-2"><a href="modifying-plots.html#cb113-2" aria-hidden="true" tabindex="-1"></a>a <span class="sc">+</span> <span class="fu">theme_economist</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-64-2.png" width="\textwidth" /></p>
</div>
<div id="arranging-plots-faceting" class="section level3 hasAnchor" number="4.3.5">
<h3><span class="header-section-number">4.3.5</span> Arranging plots (faceting)<a href="modifying-plots.html#arranging-plots-faceting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The function <code>facet_grid(rvar~cvar)</code> creates separate plots based on the values <code>rvar</code> (rows) and <code>cvar</code> (columns) takes. The function <code>facet_wrap(~var1+var2)</code> arranges the plots in several rows and columns without rigidly associating one variable with rows and one with columns. Continuous variables need to be discretised (for example using <code>cut</code>) before they can be used for defining facets.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="modifying-plots.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>health) <span class="sc">+</span> </span>
<span id="cb114-2"><a href="modifying-plots.html#cb114-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x=</span>HealthExpenditure,  <span class="at">y=</span>LifeExpectancy, <span class="at">colour=</span>Region) <span class="sc">+</span></span>
<span id="cb114-3"><a href="modifying-plots.html#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size=</span>Population)) <span class="sc">+</span></span>
<span id="cb114-4"><a href="modifying-plots.html#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">&quot;lm&quot;</span>)  <span class="sc">+</span></span>
<span id="cb114-5"><a href="modifying-plots.html#cb114-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb114-6"><a href="modifying-plots.html#cb114-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>Region)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning in qt((1 - level)/2, df): NaNs produced</code></pre>
<pre><code>## Warning in max(ids, na.rm = TRUE): no non-missing arguments to max; returning
## -Inf</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-65-1.png" width="\textwidth" /></p>
<p>Arranging plots in more general ways (like in <code>par(mfrow=c(...))</code> or <code>layout</code>) is not directly possible with <code>ggplot2</code>. The package <a href="https://cran.r-project.org/web/packages/gridExtra">gridExtra</a> however provides a function <code>grid.arrange</code>, which allows for arranging <code>ggplot2</code> plots side by side.</p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="using-the-more-general-ggplot-interface.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="handling-date-time-data-with-lubridate.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-ggplot.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
